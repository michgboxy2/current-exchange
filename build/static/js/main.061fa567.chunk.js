(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,a){e.exports=a(35)},23:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(10),i=a.n(r),o=(a(23),a(3)),c=a(4),l=a(6),u=a(5),d=a(7),h=(a(24),a(16)),p=a(9),f=a.n(p),m=a(12),v=a(2),b=(a(26),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={hightlight:!1},a.fileInputRef=s.a.createRef(),a.openFileDialog=a.openFileDialog.bind(Object(v.a)(a)),a.onFilesAdded=a.onFilesAdded.bind(Object(v.a)(a)),a.onDragOver=a.onDragOver.bind(Object(v.a)(a)),a.onDragLeave=a.onDragLeave.bind(Object(v.a)(a)),a.onDrop=a.onDrop.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"openFileDialog",value:function(){this.props.disabled||this.fileInputRef.current.click()}},{key:"onFilesAdded",value:function(e){if(!this.props.disabled){var t=e.target.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}}}},{key:"onDragOver",value:function(e){e.preventDefault(),this.props.disabed||this.setState({hightlight:!0})}},{key:"onDragLeave",value:function(e){this.setState({hightlight:!1})}},{key:"onDrop",value:function(e){if(e.preventDefault(),!this.props.disabed){var t=e.dataTransfer.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}this.setState({hightlight:!1})}}},{key:"fileListToArray",value:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e.item(a));return t}},{key:"render",value:function(){return s.a.createElement("div",{className:"Dropzone ".concat(this.state.hightlight?"Highlight":""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onClick:this.openFileDialog,style:{cursor:this.props.disabled?"default":"pointer"}},s.a.createElement("input",{ref:this.fileInputRef,className:"FileInput",type:"file",multiple:!0,onChange:this.onFilesAdded}),s.a.createElement("img",{alt:"upload",className:"Icon",src:"baseline-cloud_upload-24px.svg"}),s.a.createElement("span",null,"Upload Files"))}}]),t}(n.Component)),g=(a(27),a(28),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"ProgressBar"},s.a.createElement("div",{className:"Progress",style:{width:this.props.progress+"%"}}))}}]),t}(n.Component)),y=a(17),O=a(8),j=(a(34),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getCurrencies=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://127.0.0.1:3000/api/v1/disburse").then((function(e){return e.json()})).then((function(e){a.setState({currencyList:e})})).catch((function(e){O.b.error(e)}));case 1:case"end":return e.stop()}}),e)}))),a.renderDownloadCsvButton=function(){if(a.state.csvAvailable)return s.a.createElement(y.CSVLink,{data:a.state.disbursementRecords},s.a.createElement("button",null,"Download CSV"))},a.state={files:{},uploading:!1,uploadProgress:{},successfullUploaded:!1,disbursementRecords:[],csvAvailable:!1,currencyList:[],currency:""},a.exportCSV=a.exportCSV.bind(Object(v.a)(a)),a.onChange=a.onChange.bind(Object(v.a)(a)),a.onFilesAdded=a.onFilesAdded.bind(Object(v.a)(a)),a.uploadFiles=a.uploadFiles.bind(Object(v.a)(a)),a.sendRequest=a.sendRequest.bind(Object(v.a)(a)),a.renderActions=a.renderActions.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getCurrencies()}},{key:"onFilesAdded",value:function(e){this.setState({files:e})}},{key:"onChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"uploadFiles",value:function(){var e=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({uploadProgress:{},uploading:!0}),this.sendRequest(this.state.files);try{this.setState({successfullUploaded:!0,uploading:!1})}catch(t){this.setState({successfullUploaded:!0,uploading:!1}),O.b.error(t)}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendRequest",value:function(){var e=Object(m.a)(f.a.mark((function e(t){var a,n,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.currency){e.next=4;break}return O.b.error("kindly select a base currency from the drop down"),e.abrupt("return",null);case 4:(n=new FormData).append("file",t[0],t.name),n.append("baseCurrency",a),fetch("http://127.0.0.1:3000/api/v1/disburse",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return s.setState({disbursementRecords:e,csvAvailable:!0})})).catch((function(e){O.b.error(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderProgress",value:function(e){var t=this.state.uploadProgress[e.name];if(this.state.uploading||this.state.successfullUploaded)return s.a.createElement("div",{className:"ProgressWrapper"},s.a.createElement(g,{progress:t?t.percentage:0}),s.a.createElement("img",{className:"CheckIcon",alt:"done",src:"baseline-check_circle_outline-24px.svg",style:{opacity:t&&"done"===t.state?.5:0}}))}},{key:"exportCSV",value:function(){"Total amount ".concat(this.state.currency),"Total amount ".concat(this.state.currency)}},{key:"renderActions",value:function(){var e=this;if(this.state.files.length>1&&O.b.error("Only one file is allowed for download"),1===this.state.files.length)return this.state.successfullUploaded?s.a.createElement("button",{onClick:function(){return e.setState({successfullUploaded:!1})}},"Clear"):s.a.createElement("button",{onClick:this.uploadFiles},"Upload")}},{key:"render",value:function(){var e=this.state,t=e.csvAvailable;e.currency;return t&&O.b.success("click the download button to download csv file"),s.a.createElement("div",{className:"Upload"},s.a.createElement("span",{className:"Title"},"click to Upload Files"),s.a.createElement("div",{className:"Content"},s.a.createElement("div",{className:"row"},s.a.createElement(b,{onFilesAdded:this.onFilesAdded,disabled:this.state.uploading||this.state.successfullUploaded}),s.a.createElement("div",{className:"col-md-5"},s.a.createElement("div",{className:"input-group mb-1"},s.a.createElement("select",{className:"custom-select",name:"currency",value:this.state.currency,onChange:this.onChange},s.a.createElement("option",{defaultValue:!0},"Select currency"),this.state.currencyList.map((function(e,t){return t++,s.a.createElement("option",{key:t,value:e},e)})))))),s.a.createElement("div",{className:"Files"},s.a.createElement("div",{className:"Row"},s.a.createElement("span",{className:"Filename"},this.state.files.name),this.renderProgress(this.state.files)))),s.a.createElement("div",{className:"Actions"},this.renderActions()),this.renderDownloadCsvButton(),s.a.createElement(O.a,null))}}]),t}(n.Component)),k=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"Card"},s.a.createElement(j,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.061fa567.chunk.js.map